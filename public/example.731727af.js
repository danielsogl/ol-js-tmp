parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"bi4q":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.stma_openlayers=void 0;var t=function t(){e(this,t);var n=null,o=null,r=null,i=null,a=null,s=function(){return null==i&&$.ajax({method:"POST",url:"https://gis5.stuttgart.de/geoline/geoline.config/config.aspx",data:{v:"@version@",epsg:n,url:location.href},dataType:"json",async:!1,cache:!1,success:function(e){e.ags_hosts=$.map(e.ags_services,function(e){return e.ags_host}),i=e},error:function(e,t){console.error("OHOH",e,t)}}),i},l=function(e,r,i,a){$.ajax({url:e+"?f=json",type:"POST",dataType:"jsonp",success:function(l){try{if(void 0!==l.error)return void console.warn("Eigenschaften des Kartendienstes "+e+" konnten nicht abgerufen werden.",l.error);var d=new URL(e);if(jQuery.inArray(d.hostname,s().ags_hosts)>-1&&(null!=l.copyrightText&&0!=l.copyrightText.length||(l.copyrightText="© Stadtmessungsamt, LHS Stuttgart")),d.hostname.indexOf("arcgisonline.com")>-1||d.hostname.indexOf("arcgis.com")>-1){var f=$.grep(o.getControls().getArray(),function(e,t){return ol.control.Attribution.prototype.isPrototypeOf(e)})[0];f.setCollapsible(!1),f.setCollapsed(!1)}if(10.05==l.currentVersion&&null==l.spatialReference.latestWkid)switch(l.spatialReference.wkid){case 102100:l.spatialReference.latestWkid=3857}n!="EPSG:"+l.spatialReference.wkid&&n!="EPSG:"+l.spatialReference.latestWkid&&console.warn("Projektion der Karte und des Kartendienstes stimmen nicht überein. Karte: "+n+", Kartendienst: EPSG:",l.spatialReference.wkid+" / EPSG:"+l.spatialReference.latestWkid,e),1==l.singleFusedMapCache?c(e,r,i,l,a):u(e,r,i,l,a)}catch(t){console.error("Fehler beim Initalisieren des Layers "+e,t)}},error:function(e,t){console.error("OHOH",e,t)}})},c=function(e,t,n,i,l){var c=[];$.each(i.tileInfo.lods,function(e,t){c.push(t.resolution)});var u,d=new ol.tilegrid.TileGrid({origin:[i.tileInfo.origin.x,i.tileInfo.origin.y],extent:[i.fullExtent.xmin,i.fullExtent.ymin,i.fullExtent.xmax,i.fullExtent.ymax],minZoom:0,resolutions:c,tileSize:[i.tileInfo.rows,i.tileInfo.cols]});o.getView().getProjection().getCode()!=u&&($.extend(!0,r,{resolutions:c}),o.setView(new ol.View(r))),u=null!=i.spatialReference.latestWkid?i.spatialReference.latestWkid:i.spatialReference.wkid;var f={minZoom:"0"},g={tileGrid:d,projection:ol.proj.get("EPSG:"+u),attributions:i.copyrightText,url:e+"/tile/{z}/{y}/{x}"};null!=a&&(g.tileLoadFunction=a),$.extend(!0,f,n,g);var p=10,y=new URL(e);jQuery.inArray(y.hostname,s().ags_hosts)>-1&&(p=20);var h={zIndex:p},m={source:new ol.source.XYZ(f)};$.extend(!0,h,t,m);var v=new ol.layer.Tile(h);o.addLayer(v),"function"==typeof l&&l(v)},u=function(e,t,n,r,i){var a={params:{layers:"show:0"}},l={ratio:1,url:e,attributions:[new ol.Attribution({html:r.copyrightText})]};$.extend(!0,a,n,l);var c=40,u=new URL(e);jQuery.inArray(u.hostname,s().ags_hosts)>-1&&(c=50);var d={zIndex:c},f={source:new ol.source.ImageArcGISRest(a)};$.extend(!0,d,t,f);var g=new ol.layer.Image(d);o.addLayer(g),"function"==typeof i&&i(g)};this.initMap=function(e,t,s,l){ol.proj.addProjection(new ol.proj.Projection({code:"EPSG:25832",units:"m"})),ol.proj.addProjection(new ol.proj.Projection({code:"EPSG:31467",units:"m"})),n="EPSG:"+e,null==ol.proj.get(n)&&console.error("Projektion "+n+" nicht gefunden. Es kann zu falscher Darstellung der Karte kommen"),null!=l&&null!=l.tileLoadFunction&&(a=l.tileLoadFunction),null!=l&&null!=l.config&&(console.warn("Konfiguration wurde manuell gesetzt und wird nicht vom Server des Stadtmessungamtes geladen. Bitte stellen Sie sicher, dass die Konfiguration immer aktuell ist."),i=l.config);var c={target:"map",controls:ol.control.defaults({attribution:!0,attributionOptions:{tipLabel:"Copyright"}})};if($.extend(!0,c,t,{logo:!1,pixelRatio:1,loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0}),null!=c.controls){var u=!1;c.controls.forEach(function(e,t){ol.control.Attribution.prototype.isPrototypeOf(e)&&(u=!0)}),0==u&&c.controls.push(new ol.control.Attribution({tipLabel:"Copyright"}))}r=$.extend(!0,{},{center:[513785,5402232],zoom:2},s,{projection:ol.proj.get(n)}),o=new ol.Map(c),$(".ol-viewport").on("contextmenu",function(e){e.preventDefault()}),o.updateSize()},this.addEsriLayer=function(e,t,n,o){var r=new URL(e);jQuery.inArray(r.hostname,s().ags_hosts)>-1?console.error("Kartendienste des Stadtmessungsamtes über die Methode addStmaEsriLayer hinzufügen"):l(e,t,n,o)},this.addStmaEsriLayer=function(e,t,n,o){l("https://"+s().ags_host+"/"+s().ags_instance+"/rest/services/"+e+"/MapServer",t,n,o)},this.addStmaBaseLayer=function(e,t,n,o){null!=s().ags_services[e]?l("https://"+s().ags_services[e].ags_host+"/"+s().ags_services[e].ags_instance+"/rest/services/"+s().ags_services[e].ags_service+"/MapServer",t,n,o):console.error("Karte '"+e+"' nicht gefunden")},this.addPoints=function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(new ol.Feature({geometry:new ol.geom.Point(e[i])}));var a=new ol.layer.Vector({zIndex:60,source:new ol.source.Vector({features:r}),style:new ol.style.Style({image:new ol.style.Icon({anchor:[.5,1],src:t})})});o.addLayer(a),"function"==typeof n&&n(a)},this.addStmaEsriFeatureLayer=function(e,t,r,i){var a=n.replace("EPSG:","");console.warn("_epsgCode: "+a);var l=new ol.format.EsriJSON,c=new ol.source.Vector({loader:function(n,o,r){var i="https://"+s().ags_host+"/"+s().ags_instance+"/rest/services/"+e+"/MapServer/"+t+"/query/",u={f:"json",returnGeometry:!0,spatialRel:"esriSpatialRelIntersects",geometry:encodeURIComponent('{"xmin":'+n[0]+',"ymin":'+n[1]+',"xmax":'+n[2]+',"ymax":'+n[3]+',"spatialReference":{"wkid":'+a+"}}"),geometryType:"esriGeometryEnvelope",inSR:a,outFields:"*",outSR:a};$.ajax({method:"POST",url:i,data:u,dataType:"jsonp",success:function(e){if(e.error)alert(e.error.message+"\n"+e.error.details.join("\n"));else{var t=l.readFeatures(e,{featureProjection:r});t.length>0&&c.addFeatures(t)}}})},strategy:ol.loadingstrategy.tile(ol.tilegrid.createXYZ({tileSize:512}))}),u=new ol.layer.Vector({zIndex:60,source:c,style:r});o.addLayer(u),"function"==typeof i&&i(u)},this.getMap=function(){return o},this.getConfig=function(){return s()}};exports.stma_openlayers=t;
},{}],"Focm":[function(require,module,exports) {
"use strict";var A=require("../dist/geoline.ol.modern"),e=new A.stma_openlayers;e.initMap(31467,{},{center:[3513816,5404938],zoom:2}),e.addStmaBaseLayer("Grundkarte"),e.addPoints([[3513223,5405026]],"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAlCAYAAAAjt+tHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNq8WD1s00AUPjuX1goJKog/CSYQqAhoFSgDgglVSKwMSLCxdIGJHQa6M8HShQ0kBlYkBiZQBqCh/AgEQmKg0PJTVU3axokdc9/pvXA1tmMXlyc9+eLE9333/vxerPHxcaHEUlogLRpr3M9DAqU+acdYB5JAcB1Q6pAOEAE7JwJdAmwrbZFi7UkCAmBJ6Wa6DhKpPMVT6ipdUbrElmECDoFvt2275nmesCxLBEEg1Gd9heIetGfXIEhENH/b6XSE67qiXC6fMKyiLVAkAiX1QG3vFikObHXEkFPI9fiLLV98WPBE/fOvWqVSGSE3uLbhgkHf9xW4zB0cgj2xd6kED2sX6zizjYiXMFkW8Es3H2jNQkJKHVrsek3A4mg3fbZR0u12eamxbfGfJXzINanWL6ohu4er4szEtb9cAXk0NSlm39eTKxJlk2mGWHZRAgAAhSUNeJSsywUAenj7jxWwXg+4+JdqN/fprXhy71Zvvd4YsPvFAHweJx+fPdaaFC9RMZDJBQi4OBJ7Dh7VmjZY+2ZBEgn42TT1+etTYtPQNr1eXvwp7t+Y6H23a9+hSPCoLJBxFS4sZy9Pap/D5Dg1g0Owxr0v76bF/uOnxakLVyL3unP1XD5ZkKfIKP+YTPkEpgtwUpjddAHucWA2Fua1xeJOnbkSosiEUw0+5wBkcDNF8UxcHGQKwqQKFwZOUzET60BUKU6qcAg4aBKJTBZI8zIyU42jHT5PWw0TX0ZpCaDIcJBxiiZVzNQuSAseFVxJFTPpkJKGBt2moANO8ybk1OIU7ZdqMRYAZmAbU4qHdhzd60YJ9kbjSzOCxrWNicVF347WeSNIcFtOFnAJ07fUbIgWuYymFYNJo9GoOY4jisXimg1Gdg6IwzsGU4G9+e6KmTm3N9zgys2ocjMGkx/gpLQpyQItHpdoaODRzOIBVW34FNd+JAD+8lsLQCfJ54H2tW2HRzNg+tJwAQdGKzScSpoZxhSJ50kkAP5qvg3wMZqCPdK44dTnLPCMq2sMK0wAiI4iUVWnq0eRME6OXFzl0StEIHI8Fwa4d/FIxeVN775uWAaBso5a2x6tf12dMUkAfHp2BVPPKJm4SerSnoGxZ/pCRA+yVXjTlUKhUFUkNDAUawVe7QceWRfoH5K+9SNkCYzy5Waz+QJfqpH7GIEumeBk2VzacraEWcU6CniYPiOglskCqcGzzgUmCV7L0L8f7SzgkN8CDAD/wMp5zGKV4QAAAABJRU5ErkJggg==");
},{"../dist/geoline.ol.modern":"bi4q"}]},{},["Focm"], null)
//# sourceMappingURL=example.731727af.js.map